= Code Submission for 8th Light
Benjamin b.james.neustadt@gmail.com
:copyright: © 2022 Benjamin
:doctype: article
:icons: font
:toc: left
:toclevels: 2
:toc-title: Table of Contents
:source-highlighter: rouge
:rouge-style: monokai
//URLS
:url-google-api: https://developers.google.com/books/docs/v1/using#APIKey
:url-google-api-medium: https://rachelaemmer.medium.com/how-to-use-the-google-books-api-in-your-application-17a0ed7fa857
:url-google-console: https://console.cloud.google.com/apis/api/books.googleapis.com/credentials?project=my-test-project-371917


= Usage

1. Set up an API KEY
2. Install Ruby
3. Install dependencies
4. Run the program: `ruby bin/bookview.rb`

== Set-Up Instructions

To use this application, clone this repo to your local with the following command:

`git clone https://github.com/BenjaminNeustadt/8th_light_test.git`

An *API key* is necessary to use this program,
so head {url-google-api}[here] and follow the instructions to set up your personal key.
Go {url-google-console}[here] to enable 'Books API'.
There is a daily quota of 1000 queries per day,
so it is important that you keep your key to yourself.

****
[TIP]
====
If you are uncertain how to set up, use {url-google-api-medium}[this article] to set up the google api key correctly.
====
****

Once you have your key, open the `env.json` file and insert it in place:

[source, json]
----
// env.json file

{ "API_KEY" : "[YOUR API KEY]" } <1>
----
<1> You will only need one set of quotation marks surrounding the key.

Ensure that you have Ruby downloaded on your system, you can check by inputting `ruby -v` into your terminal.

Run `bundle install` to ensure you have all the correct dependencies of this project.


== Using the Program

From within the root directory of the program,
in your terminal:

[source, sh]
----
ruby bin/bookview.rb
----

Follow the prompts to search for a book query.
You can insert any word and will be given a return of 5 books that match your query.
Follow the prompts to add the book to a reading list.

= Testing

The testing framework used is Rspec.

[IMPORTANT]
Open the `bookview.rb` file, and set the `OFFLINE` constant to `true`:
The application is by default switched to "ONLINE", this means that once you insert your API KEY,
when the tests are run, a real query will be made - this can be switched off easily, however.
For an optimal testing environment the application should be switched to "OFFLINE".

.To enable a test environement and not affect your API quota.
[source, ruby]
----
# bin/bookview.rb file

require_relative '../lib/booksearch'
require 'colorize'

OFFLINE = false    <---<1>
MENU = {
  ACTION: {
    1 => "search",
    2 => "view search results",
    3 => "add",
    4 => "view",
    0 => "exit"
  }
}
----
<1> Change the word "false" to "true".
Make sure you have updated/saved the file.

The program can now be used "offline"

.To run the tests:
[source, sh]
----
rspec -fd
----

If the program is set to "ONLINE", by setting `OFFLINE` to `false` in the 'bookview.rb',
one of the tests will check a valid http connection (otherwise,
it will use a test_data file to validate).

= Process

Following is some of the planning and side thoughts throughout.

== CRC Model Planning

_Class Responsibility Collaborator_

_Following a Model/View/Controller design_

         Front-end                                 Back-end
 - - - - - - - - - - - - - -    - - - - - - - - - - - - - - - - - - - - - - - - - - -

   Public facing interface          Operation                 Storage
   (Command line interface)
  ┌───────────────────────┐     ┌───────────────────────┐    ┌───────────────────────┐
  │  BookSearch           │     │  BookList             │    │  UserList             │
  │              BookList │     │            BookSearch │    │        BookSearch,BookList
  ├──────────────┬────────┤     ├──────────────┬────────┤    ├──────────────┬─────────
  │.Give         │        │     │.grab_books   │        │    │.Store users  │.BookList
  │ instructions │.BookList     │              │        │    │ chosen books │        │
  │ to user      │        │     │.search       │        │    │              │.BookSearch
  │.Pass         │        │     │              │        │    │.Pass array   │        │
  │ instructions │        │     │.add (instantiates     │    │ of books to  │        │
  │ to BookList  │        │     │instance of UserList   │    │ BookSearch   │        │
  │.Retrive Userlist      │     │              │        │    │              │        │
  │ (stored book data)    │     │              │        │    │              │        │
  │              │        │     │              │        │    │              │        │
  └──────────────┴────────┘     └──────────────┴────────┘    └──────────────┴────────┘

            VIEW                         CONTROLLER                     MODEL


== Storage

I am wondering whether to make the "storage" of books temporary to the existance of the class,
or whether to make it persist beyond the running of the program in the terminal.
The second option would mean having the data written to a storage file, similar to 'test_data.json'.

In order for this to work, the file in question would have to be gitignored,
so that the saved data is only accessible to the respective user,
so that the data is not passed on were the program to be passed on.

== Stretch goals

As another goal I would like to add a test for the "front-end"
(the command-line user interface).

= Initial Brief

Create a command line application that allows you to use the
Google Books API to search for books and construct a reading list.

You do not have to use a private GitHub repo for this.

_This application should allow you to:_

1. Type in a query and display a list of *5 books matching that query.*
2. Each item in the list should include the book's author, title, and publishing
  company.
3. A user should be able to select a book from the five displayed to save to a
  “Reading List” View a “Reading List” with all the books the user has selected
  from their queries
  - this is a local reading list and not tied to Google
  Books’s account features.
4. For programming language, choose any language you want as long as it is not
  the same language you chose to review in the Code Review section above.
5. Feel free to use a library (or not) for the Google Books call or JSON parsing.

Please do not add any additional features.

Your submission doesn’t need to be perfect.

After we receive your submission we'll review your code, respond to you with
our feedback and suggestions, and give you an opportunity to respond to our
feedback and make improvements to your code before you re-submit a second and
final version.

That said, we would still like to see your best work with the first version you submit.
It should demonstrate external quality (for example: solves the problem,
handles edge cases, usability), internal quality (for example:
*decoupling*, *testing*, *readability*), as well as some idea of your process and
approach (via your version control history and README).
